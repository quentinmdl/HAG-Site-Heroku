{% extends 'base.html.twig' %}

{% block body %}
    <container class="container" >
        <div class="justify-content-md-center" style="padding: 70px 0;">
            <div class="col-xs-12 col-md-7 mx-auto">
                {% for message in app.flashes('success') %}
                    <div class="alert alert-success">
                        {{ message }}
                    </div>
                {% endfor %}
                <div class="text-center">
                    <div>
                        <h2>{{ article.title }}</h2>
                    </div>
                    <div>
                        <img src="{{ vich_uploader_asset(article, 'imageFile') }}"  width="250" height="auto" alt="img article">
                    </div>
                    <div style="word-wrap: break-word;">
                        <p> {{ article.description|raw  }} </p>
                    </div>
                    <div>
                        <p> Ecrit le {{ article.createdAt | date('d/m/Y') }} à {{ article.createdAt | date('h:m') }} dans la catégorie {{ article.category.title }}
                    </div>
                </div>
                <section id="commentaires" style="padding-top: 70px;">
                    <h1> {{ article.comments | length}} Commentaire(s) :</h1>
                    {% if article.comments is empty %}
                        <p>Il n'y pas encore de commentaires pour cette article</p>
                    {% endif %}
                    {% for comment in article.comments %}
                        <div class="comment">
                            <div class="row">
                                <div class="col-3">
                                    {{ comment.author}} (<small>{{ comment.createdAt | date('d/m/Y à H:i')}}</small>)
                                </div>
                                <div class="col">
                                    {{ comment.content | raw }}
                                </div>
                            </div>
                        </div>
                    {% endfor %}

                    {% if app.user %}
                        {{ form_start(commentForm) }}
                            {{ form_row(commentForm.content, { 'label' : 'Commentaire:', 'attr': { placeholder: "Votre commentaire" }}) }}
                            <button type="submit" class="btn btn-success">Commenter</button>
                        {{ form_end(commentForm) }}
                    {% else %}
                        <p>Veuillez vous connecter afin de commenter cette article</p>
                        <a href="{{ path('app_login') }}" class="btn btn-primary">Connexion</a> 
                    {% endif %}
                </section>
            </div>
        </div>
    </container>
{% endblock %}
